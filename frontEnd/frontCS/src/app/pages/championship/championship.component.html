<app-spinner-default></app-spinner-default>
<p-toast></p-toast>
<div class="flex flex-column h-screen">
    <app-edit-header-div 
        [labelDiv]="'Championship.singular'">
    </app-edit-header-div>
    <div class="flex-grow-1 overflow-hidden divEditCenter">
        <p-tabView>
            <p-tabPanel header="{{'CommonData.singular' | translate}}">
                <p-scrollPanel styleClass="divEditCenterScroll">
                    <p-fieldset class="col-12" legend="{{'GeneralData.plural' | translate}}" [toggleable]="true">
                        <div class="formgrid grid">
                            <div class="flex flex-column col-6 md:col-1 ">
                                <label for="firstname2">{{'idInternal.singular' | translate}}</label>
                                <input pInputText [(ngModel)]="activeRegister.cdnChampionship"/>
                            </div>
                            <div class="flex flex-column col-6 md:col-2 ">
                                <label for="username">{{'Name.singular' | translate}}</label>
                                <input pInputText [(ngModel)]="activeRegister.name"/>
                            </div>
                            <p-fieldset class="col-12" legend="{{'Stage.plural' | translate}}" [toggleable]="true">
                                <div class="formgrid grid w-full relative">
                                    <div style="position: absolute; right: 0px; top: -40px; margin: 5px;">
                                        <p-button class="" icon="pi pi-plus" severity="help" class="mr-2" (onClick)="addStageLine(undefined, -1)"></p-button>          
                                    </div>        
                                    <p-table 
                                        styleClass="p-datatable-striped"
                                        class="w-full"
                                        [value]="activeRegister.championshipStages!"
                                        selectionMode="single"
                                        [(selection)]="selectedChampionshipStages" 
                                        dataKey="cdnChampionshipStages"
                                        (onRowSelect)="editChampionshipStages($event)"
                                    >
                                    <ng-template pTemplate="header">
                                        <tr>
                                            <th>{{"NumberStage.singular"  | translate}}</th>
                                            <th>{{"Name.singular"         | translate}}</th>
                                            <th>{{"StartDate.singular"    | translate}}</th>
                                            <th>{{"EndDate.singular"      | translate}}</th>
                                        </tr>
                                    </ng-template>
                                    <ng-template pTemplate="body" let-championshipStage let-rowIndex="rowIndex">
                                        <tr [pSelectableRow]="championshipStage">
                                            <td>{{ championshipStage.numberStage }}</td>
                                            <td>{{ championshipStage.name }}</td>
                                            <td>{{ championshipStage.startDate | dateFormat }}</td>
                                            <td>{{ championshipStage.endDate   | dateFormat }}</td>
                                        </tr>
                                    </ng-template>
                                </p-table>
                            </div>
                            </p-fieldset>
                        </div>
                    </p-fieldset>
                </p-scrollPanel>
            </p-tabPanel>
        </p-tabView>
    </div>
    <div class="flex divEditBottom">
        <div class="flex justify-content-end flex-wrap  w-full">
                <p-button icon="pi pi-trash" styleClass="p-button-danger" (onClick)="onDelete()"></p-button>
                <p-button icon="pi pi-save" styleClass="p-button-success" (onClick)="onSave()"></p-button>
            <p-button icon="pi pi-sign-in" (onClick)="onBack()"></p-button>
        </div>
    </div>
</div>